/*
 * This file was generated by the Gradle 'init' task.
 *
 * This is a general purpose Gradle build.
 * Learn how to create Gradle builds at https://guides.gradle.org/creating-new-gradle-builds
 */

 apply plugin:'java'

 //to use gradle run and run the main class
 apply plugin:'application'


 //I am using JDK11 and this project had code which was not supported in JDK 11
 // so installed jdk and made sure this build used jdk
compileJava   {
    options.fork = true
    //path to jdk/home
    options.forkOptions.javaHome = file('/Library/Java/JavaVirtualMachines/adoptopenjdk-8.jdk/Contents/Home/')
  sourceCompatibility = '1.8'
  targetCompatibility = '1.8'
}

//same has to be done for test 
compileTestJava   {
    options.fork = true
    options.forkOptions.javaHome = file('/Library/Java/JavaVirtualMachines/adoptopenjdk-8.jdk/Contents/Home/')
  sourceCompatibility = '1.8'
  targetCompatibility = '1.8'
}

//project dependencies 
dependencies {

    compile files ('lib/junit-3.8.1.jar','lib/log4j-1.2.8.jar','lib/jaxb-api-2.3.0.jar')
}
 sourceSets{

     main{
         java{

             srcDir 'src'
         }
     }

    test{
        java{

            srcDir 'test/src'

        }
    }
 }

// task checkJavaVersion  {doLast{
//     if (!JavaVersion.current().isJava8()) {
//         String message = "ERROR: Java 1.6 required but " +
//                           JavaVersion.current() +
//                           " found. Change your JAVA_HOME environment variable.";
//         throw new IllegalStateException(message);
//     }
// }
// }

// compileJava.dependsOn checkJavaVersion




//gradle run -->  will list out 

//command line args
run{
    if(project.hasProperty('args')){
        args project.args.split('\\s')
    }
}
// gradle run -Pargs="-f build.gradle -d build.hash"

//main class
mainClassName='com.pluralsight.security.Hash'